@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

/* Leaflet Map Styles */
@import 'leaflet/dist/leaflet.css';

/* Leaflet Popup Z-Index and Overflow Fixes */
.leaflet-container {
  overflow: visible !important;
  clip-path: none !important;
}
.leaflet-pane {
  z-index: 400;
  overflow: visible !important;
}
.leaflet-tile-pane {
  z-index: 200;
}
.leaflet-overlay-pane {
  z-index: 400;
  overflow: visible !important;
}
.leaflet-shadow-pane {
  z-index: 500;
}
.leaflet-marker-pane {
  z-index: 600;
  overflow: visible !important;
}
.leaflet-tooltip-pane {
  z-index: 650;
  overflow: visible !important;
}
.leaflet-popup-pane {
  z-index: 9999 !important;
  overflow: visible !important;
}
.leaflet-popup {
  z-index: 9999 !important;
  position: absolute !important;
}
.leaflet-popup-content-wrapper,
.leaflet-popup-tip-container {
  z-index: 9999 !important;
}
.leaflet-popup-content-wrapper {
  background: white;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.25);
  padding: 0;
}
.leaflet-popup-content {
  margin: 14px 18px;
}
.leaflet-popup-tip {
  background: white;
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}
.leaflet-popup-close-button {
  z-index: 10000 !important;
  color: #6b7280 !important;
  font-size: 20px !important;
  padding: 8px !important;
}
.leaflet-popup-close-button:hover {
  color: #111827 !important;
}
.leaflet-control {
  z-index: 800;
}
.leaflet-top,
.leaflet-bottom {
  z-index: 1000;
}

/* Ensure popups can escape map bounds */
.leaflet-map-pane {
  overflow: visible !important;
  clip-path: none !important;
}

/* Map container parent must allow overflow */
.leaflet-container * {
  clip-path: none !important;
}

/* ================================================
   HAMMY'S DESIGN SYSTEM - Global Styles
   Clean & Minimal | Turquoise | Neumorphism
   ================================================ */

/* ================================================
   CSS VARIABLES
   ================================================ */
:root {
  /* Light mode */
  --background: 250 250 250;
  --foreground: 24 24 27;
  --card: 244 244 245;
  --card-foreground: 24 24 27;
  --primary: 20 184 166;
  --primary-foreground: 255 255 255;
  --secondary: 228 228 231;
  --secondary-foreground: 24 24 27;
  --muted: 244 244 245;
  --muted-foreground: 113 113 122;
  --accent: 249 115 22;
  --accent-foreground: 255 255 255;
  --border: 228 228 231;
  --ring: 20 184 166;

  /* Semantic color aliases */
  --color-text-primary: #18181b;
  --color-text-secondary: #52525b;
  --color-bg-page: #fafafa;
  --color-bg-card: #ffffff;

  /* Gray scale aliases (mapped to surface) */
  --gray-50: #fafafa;
  --gray-100: #f4f4f5;
  --gray-200: #e4e4e7;
  --gray-300: #d4d4d8;
  --gray-400: #a1a1aa;
  --gray-500: #71717a;
  --gray-600: #52525b;
  --gray-700: #3f3f46;
  --gray-800: #27272a;
  --gray-900: #18181b;

  /* Neumorphism */
  --neu-light: #ffffff;
  --neu-dark: #d1d1d1;
  --neu-bg: #e4e4e7;
}

.dark {
  --background: 10 10 11;
  --foreground: 250 250 250;
  --card: 20 20 22;
  --card-foreground: 250 250 250;
  --primary: 45 212 191;
  --primary-foreground: 9 9 11;
  --secondary: 28 28 31;
  --secondary-foreground: 250 250 250;
  --muted: 24 24 27;
  --muted-foreground: 161 161 170;
  --accent: 251 146 60;
  --accent-foreground: 9 9 11;
  --border: 38 38 42;
  --ring: 45 212 191;

  /* Semantic color aliases (dark mode) */
  --color-text-primary: #fafafa;
  --color-text-secondary: #a1a1aa;
  --color-bg-page: #0a0a0b;
  --color-bg-card: #141416;

  /* Gray scale aliases (dark mode) */
  --gray-50: #18181b;
  --gray-100: #27272a;
  --gray-200: #3f3f46;
  --gray-300: #52525b;
  --gray-400: #71717a;
  --gray-500: #a1a1aa;
  --gray-600: #d4d4d8;
  --gray-700: #e4e4e7;
  --gray-800: #f4f4f5;
  --gray-900: #fafafa;

  /* Dark mode - clean card design (no neumorphism) */
  --neu-light: rgba(255, 255, 255, 0.05);
  --neu-dark: rgba(0, 0, 0, 0.5);
  --neu-bg: #18181b;
  --dark-card-bg: linear-gradient(145deg, #1c1c1f 0%, #141416 100%);
  --dark-card-border: rgba(255, 255, 255, 0.06);
  --dark-glow: rgba(20, 184, 166, 0.15);
}

/* ================================================
   BASE STYLES
   ================================================ */
@layer base {
  * {
    @apply border-surface-200 dark:border-surface-700;
  }

  html {
    @apply scroll-smooth antialiased;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-surface-100 text-surface-900 dark:bg-surface-900 dark:text-surface-100;
    @apply transition-colors duration-300;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
  }

  /* Selection */
  ::selection {
    @apply bg-primary-500/30 text-primary-900 dark:text-primary-100;
  }

  /* Focus styles */
  :focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-surface-100 dark:ring-offset-surface-900;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }
  ::-webkit-scrollbar-track {
    @apply bg-surface-200 dark:bg-surface-800 rounded-full;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-surface-400 dark:bg-surface-600 rounded-full;
    @apply hover:bg-surface-500 dark:hover:bg-surface-500;
  }
}

/* ================================================
   NEUMORPHISM COMPONENTS
   ================================================ */
@layer components {
  /* Neumorphic Card */
  .neu-card {
    @apply rounded-2xl p-6;
    @apply bg-surface-200 dark:bg-surface-800;
    @apply transition-all duration-300 ease-smooth;
    box-shadow:
      8px 8px 16px var(--neu-dark),
      -8px -8px 16px var(--neu-light);
  }

  .neu-card:hover {
    box-shadow:
      10px 10px 20px var(--neu-dark),
      -10px -10px 20px var(--neu-light);
  }

  /* Neumorphic Button */
  .neu-button {
    @apply px-6 py-3 rounded-xl font-medium;
    @apply bg-surface-200 dark:bg-surface-800;
    @apply text-surface-700 dark:text-surface-200;
    @apply transition-all duration-200 ease-smooth;
    @apply active:scale-[0.98];
    box-shadow:
      6px 6px 12px var(--neu-dark),
      -6px -6px 12px var(--neu-light);
  }

  .neu-button:hover {
    @apply text-primary-600 dark:text-primary-400;
  }

  .neu-button:active, .neu-button.pressed {
    box-shadow:
      inset 4px 4px 8px var(--neu-dark),
      inset -4px -4px 8px var(--neu-light);
  }

  /* Neumorphic Button Primary */
  .neu-button-primary {
    @apply px-6 py-3 rounded-xl font-medium;
    @apply bg-primary-500 text-white;
    @apply transition-all duration-200 ease-smooth;
    @apply hover:bg-primary-600 active:scale-[0.98];
    box-shadow:
      6px 6px 12px var(--neu-dark),
      -6px -6px 12px var(--neu-light),
      inset 0 1px 0 rgba(255,255,255,0.2);
  }

  .neu-button-primary:active {
    box-shadow:
      inset 4px 4px 8px rgba(0,0,0,0.2),
      inset -2px -2px 4px rgba(255,255,255,0.1);
  }

  /* Neumorphic Input */
  .neu-input {
    @apply w-full px-4 py-3 rounded-xl;
    @apply bg-surface-200 dark:bg-surface-800;
    @apply text-surface-900 dark:text-surface-100;
    @apply placeholder:text-surface-400 dark:placeholder:text-surface-500;
    @apply border-none outline-none;
    @apply transition-all duration-200;
    box-shadow:
      inset 4px 4px 8px var(--neu-dark),
      inset -4px -4px 8px var(--neu-light);
  }

  .neu-input:focus {
    @apply ring-2 ring-primary-500/50;
    box-shadow:
      inset 4px 4px 8px var(--neu-dark),
      inset -4px -4px 8px var(--neu-light),
      0 0 0 3px rgba(20, 184, 166, 0.1);
  }

  /* Neumorphic Toggle/Switch */
  .neu-toggle {
    @apply relative w-14 h-8 rounded-full cursor-pointer;
    @apply bg-surface-200 dark:bg-surface-800;
    @apply transition-all duration-300;
    box-shadow:
      inset 4px 4px 8px var(--neu-dark),
      inset -4px -4px 8px var(--neu-light);
  }

  .neu-toggle::after {
    content: '';
    @apply absolute top-1 left-1 w-6 h-6 rounded-full;
    @apply bg-surface-100 dark:bg-surface-700;
    @apply transition-all duration-300;
    box-shadow:
      2px 2px 4px var(--neu-dark),
      -2px -2px 4px var(--neu-light);
  }

  .neu-toggle.active {
    @apply bg-primary-500;
  }

  .neu-toggle.active::after {
    @apply left-7 bg-white;
  }

  /* Neumorphic Progress Bar */
  .neu-progress {
    @apply h-3 rounded-full overflow-hidden;
    @apply bg-surface-200 dark:bg-surface-800;
    box-shadow:
      inset 2px 2px 4px var(--neu-dark),
      inset -2px -2px 4px var(--neu-light);
  }

  .neu-progress-bar {
    @apply h-full rounded-full;
    @apply bg-gradient-to-r from-primary-400 to-primary-600;
    @apply transition-all duration-500 ease-smooth;
  }

  /* Neumorphic Badge */
  .neu-badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
    @apply bg-surface-200 dark:bg-surface-800;
    @apply text-surface-600 dark:text-surface-300;
    box-shadow:
      3px 3px 6px var(--neu-dark),
      -3px -3px 6px var(--neu-light);
  }

  .neu-badge-primary {
    @apply bg-primary-500/20 text-primary-700 dark:text-primary-300;
  }

  /* ================================================
     DARK MODE OVERRIDES - Clean Card Design
     ================================================ */
  .dark .neu-card {
    background: linear-gradient(145deg, #1c1c1f 0%, #141416 100%);
    border: 1px solid rgba(255, 255, 255, 0.06);
    box-shadow:
      0 4px 24px rgba(0, 0, 0, 0.4),
      0 0 0 1px rgba(255, 255, 255, 0.03),
      inset 0 1px 0 rgba(255, 255, 255, 0.04);
  }

  .dark .neu-card:hover {
    border-color: rgba(20, 184, 166, 0.3);
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.5),
      0 0 20px rgba(20, 184, 166, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.06);
  }

  /* Dark Mode Button */
  .dark .neu-button {
    background: linear-gradient(145deg, #222225 0%, #18181b 100%);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  .dark .neu-button:hover {
    border-color: rgba(20, 184, 166, 0.4);
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.4),
      0 0 12px rgba(20, 184, 166, 0.15);
  }

  .dark .neu-button:active,
  .dark .neu-button.pressed {
    background: linear-gradient(145deg, #141416 0%, #1c1c1f 100%);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  /* Dark Mode Primary Button */
  .dark .neu-button-primary {
    background: linear-gradient(145deg, #14b8a6 0%, #0d9488 100%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow:
      0 4px 16px rgba(20, 184, 166, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
  }

  .dark .neu-button-primary:hover {
    background: linear-gradient(145deg, #2dd4bf 0%, #14b8a6 100%);
    box-shadow:
      0 6px 24px rgba(20, 184, 166, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  /* Dark Mode Input */
  .dark .neu-input {
    background: #0f0f10;
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .dark .neu-input:focus {
    border-color: rgba(20, 184, 166, 0.5);
    box-shadow:
      inset 0 2px 4px rgba(0, 0, 0, 0.2),
      0 0 0 3px rgba(20, 184, 166, 0.15),
      0 0 12px rgba(20, 184, 166, 0.1);
  }

  .dark .neu-input::placeholder {
    color: rgba(255, 255, 255, 0.3);
  }

  /* Dark Mode Badge */
  .dark .neu-badge {
    background: linear-gradient(145deg, #222225 0%, #18181b 100%);
    border: 1px solid rgba(255, 255, 255, 0.06);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
  }

  /* Dark Mode Toggle */
  .dark .neu-toggle {
    background: #0f0f10;
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .dark .neu-toggle::after {
    background: linear-gradient(145deg, #2a2a2d 0%, #1f1f22 100%);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
  }

  .dark .neu-toggle.active::after {
    background: linear-gradient(145deg, #ffffff 0%, #e5e5e5 100%);
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.3),
      0 0 12px rgba(20, 184, 166, 0.3);
  }

  /* Dark Mode Progress */
  .dark .neu-progress {
    background: #0f0f10;
    border: 1px solid rgba(255, 255, 255, 0.06);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .dark .neu-progress-bar {
    box-shadow: 0 0 12px rgba(20, 184, 166, 0.4);
  }

  /* Dark Mode Shimmer */
  .dark .shimmer {
    background: #18181b;
  }

  .dark .shimmer::after {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.08),
      transparent
    );
  }

  /* Dark Mode Glass */
  .dark .glass {
    background: rgba(20, 20, 22, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  }
}

/* ================================================
   UTILITY CLASSES
   ================================================ */
@layer utilities {
  /* Gradient Text */
  .text-gradient {
    @apply bg-clip-text text-transparent;
    @apply bg-gradient-to-r from-primary-500 to-accent-500;
  }

  .text-gradient-primary {
    @apply bg-clip-text text-transparent;
    @apply bg-gradient-to-r from-primary-400 via-primary-500 to-primary-600;
  }

  /* Glass Effect */
  .glass {
    @apply bg-white/70 dark:bg-surface-900/70;
    @apply backdrop-blur-lg;
    @apply border border-white/20 dark:border-surface-700/50;
  }

  /* Shimmer Loading */
  .shimmer {
    @apply relative overflow-hidden;
    @apply bg-surface-200 dark:bg-surface-800;
  }

  .shimmer::after {
    content: '';
    @apply absolute inset-0;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    @apply animate-shimmer;
    background-size: 200% 100%;
  }

  /* Glow Effect */
  .glow {
    @apply relative;
  }

  .glow::before {
    content: '';
    @apply absolute -inset-1 rounded-2xl;
    @apply bg-gradient-to-r from-primary-500 to-accent-500;
    @apply opacity-0 blur-xl transition-opacity duration-500;
    z-index: -1;
  }

  .glow:hover::before {
    @apply opacity-50;
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Animate on scroll (use with JS) */
  .animate-on-scroll {
    @apply opacity-0 translate-y-4;
    @apply transition-all duration-700 ease-out;
  }

  .animate-on-scroll.visible {
    @apply opacity-100 translate-y-0;
  }

  /* Stagger children animations */
  .stagger-children > * {
    @apply opacity-0 animate-fade-in-up;
  }

  .stagger-children > *:nth-child(1) { animation-delay: 0.1s; }
  .stagger-children > *:nth-child(2) { animation-delay: 0.2s; }
  .stagger-children > *:nth-child(3) { animation-delay: 0.3s; }
  .stagger-children > *:nth-child(4) { animation-delay: 0.4s; }
  .stagger-children > *:nth-child(5) { animation-delay: 0.5s; }
  .stagger-children > *:nth-child(6) { animation-delay: 0.6s; }

  /* Mobile touch feedback */
  @media (hover: none) {
    .touch-feedback {
      @apply active:scale-[0.97] active:opacity-80;
      @apply transition-transform duration-100;
    }
  }
}

/* ================================================
   DATA VISUALIZATION COLORS
   ================================================ */
:root {
  --chart-1: theme('colors.primary.500');
  --chart-2: theme('colors.accent.500');
  --chart-3: theme('colors.primary.300');
  --chart-4: theme('colors.accent.300');
  --chart-5: theme('colors.primary.700');
  --chart-positive: theme('colors.emerald.500');
  --chart-negative: theme('colors.rose.500');
  --chart-neutral: theme('colors.surface.400');
}

/* ================================================
   RESPONSIVE BREAKPOINT INDICATORS (Dev only)
   ================================================ */
@media (max-width: 639px) {
  .debug-screens::before { content: 'xs'; }
}
@media (min-width: 640px) {
  .debug-screens::before { content: 'sm'; }
}
@media (min-width: 768px) {
  .debug-screens::before { content: 'md'; }
}
@media (min-width: 1024px) {
  .debug-screens::before { content: 'lg'; }
}
@media (min-width: 1280px) {
  .debug-screens::before { content: 'xl'; }
}
@media (min-width: 1536px) {
  .debug-screens::before { content: '2xl'; }
}

/* ================================================
   KEYFRAME ANIMATIONS
   ================================================ */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in-down {
  from {
    opacity: 0;
    transform: translateY(-16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slide-in-left {
  from {
    opacity: 0;
    transform: translateX(-100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes ripple {
  from {
    transform: scale(0);
    opacity: 0.5;
  }
  to {
    transform: scale(4);
    opacity: 0;
  }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes skeleton-wave {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

@keyframes pulse-soft {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(20, 184, 166, 0.4);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(20, 184, 166, 0);
  }
}

@keyframes bounce-subtle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes ping {
  75%, 100% {
    transform: scale(2);
    opacity: 0;
  }
}

/* ================================================
   ANIMATION UTILITIES
   ================================================ */
.animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
.animate-fade-in-up { animation: fade-in-up 0.4s ease-out forwards; }
.animate-fade-in-down { animation: fade-in-down 0.4s ease-out forwards; }
.animate-scale-in { animation: scale-in 0.2s ease-out forwards; }
.animate-slide-in-right { animation: slide-in-right 0.3s ease-out forwards; }
.animate-slide-in-left { animation: slide-in-left 0.3s ease-out forwards; }
.animate-ripple { animation: ripple 0.6s linear forwards; }
.animate-shimmer { animation: shimmer 2s infinite linear; }
.animate-float { animation: float 3s ease-in-out infinite; }
.animate-pulse-soft { animation: pulse-soft 2s ease-in-out infinite; }
.animate-pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
.animate-bounce-subtle { animation: bounce-subtle 1s ease-in-out infinite; }
.animate-spin { animation: spin 1s linear infinite; }
.animate-ping { animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite; }

/* Skeleton wave effect */
.skeleton-wave {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.1) 20%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.1) 80%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: skeleton-wave 1.5s ease-in-out infinite;
}

.dark .skeleton-wave {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.03) 20%,
    rgba(255, 255, 255, 0.06) 50%,
    rgba(255, 255, 255, 0.03) 80%,
    transparent 100%
  );
  background-size: 200% 100%;
}

/* ================================================
   REDUCED MOTION - Accessibility
   ================================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .animate-float,
  .animate-pulse-soft,
  .animate-pulse-glow,
  .animate-bounce-subtle,
  .animate-spin,
  .animate-ping,
  .animate-shimmer,
  .skeleton-wave {
    animation: none !important;
  }
}

/* ================================================
   PREMIUM EFFECTS
   ================================================ */

/* Subtle grain texture overlay */
.grain::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  opacity: 0.015;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  z-index: 9999;
}

.dark .grain::before {
  opacity: 0.03;
}

/* Magnetic hover effect container */
.magnetic-hover {
  transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1);
}

/* Smooth border glow on focus */
.focus-glow:focus {
  box-shadow:
    0 0 0 2px rgba(20, 184, 166, 0.2),
    0 0 20px rgba(20, 184, 166, 0.1);
}

/* Gradient border effect */
.gradient-border {
  position: relative;
  background: linear-gradient(var(--tw-gradient-stops));
}

.gradient-border::before {
  content: '';
  position: absolute;
  inset: 0;
  padding: 1px;
  border-radius: inherit;
  background: linear-gradient(135deg, rgba(20, 184, 166, 0.5), rgba(249, 115, 22, 0.5));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
}

/* Frosted glass card */
.frosted {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.dark .frosted {
  background: rgba(24, 24, 27, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Hover lift effect */
.hover-lift {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
}

.dark .hover-lift:hover {
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
}

/* Interactive card with tilt */
.tilt-card {
  transform-style: preserve-3d;
  transition: transform 0.3s ease;
}

.tilt-card:hover {
  transform: perspective(1000px) rotateX(2deg) rotateY(-2deg);
}

/* Subtle text shadow for dark mode */
.dark .text-glow {
  text-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
}

/* Line clamp utilities */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Smooth transitions for everything */
* {
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Better focus outlines */
:focus-visible {
  outline: 2px solid rgba(20, 184, 166, 0.5);
  outline-offset: 2px;
}

/* Selection colors */
::selection {
  background: rgba(20, 184, 166, 0.3);
  color: inherit;
}

.dark ::selection {
  background: rgba(45, 212, 191, 0.3);
}
