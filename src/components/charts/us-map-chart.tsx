'use client';

import { useMemo } from 'react';
import { cn } from '@/lib/utils';

interface StateData {
  state: string;
  value: number;
  label?: string;
}

interface USMapChartProps {
  data: StateData[];
  colorScale?: [string, string]; // [min, max] colors
  onStateClick?: (state: string) => void;
  selectedState?: string;
  className?: string;
}

// Accurate US state paths from standard SVG map
// ViewBox: 0 0 959 593 (standard Albers USA projection)
const statePaths: Record<string, { d: string; labelPos: [number, number] }> = {
  AL: { d: 'M628.5,389.7l-1.6-20.4l-1.4-11.3l-3.8-16.1l4.8-2.6l2.4-4.9l4.5-5.9l3.2-6.5l-1-6.1l3.9-8.3l-0.9-5.5l1.6-1l32.4-3.5l10.4-0.5l2.3,10.6l3.3,17.8l3.7,13.3l-0.1,20.3l-2.3,10.2l2.9,7.6l4.1,4.3l-0.9,8.8l-4.5,5.7l0.8,2.6l-18.1,2.3l-8.9-0.1l-9.2,5.4l-3.2-0.9l1.9-7.3l-2.3-3.9l-1.2-6.6l-2.6,0.9l-2.9-2.9l-4.5,5.7l-3.9,1.3Z', labelPos: [646, 370] },
  AK: { d: 'M158.1,453.7l-0.2,85.4l2.5,1.8l5.3-0.2l2.3,2.5l5.7,0.2l3.4,3l-1.1,5.5l0.2,1.6l7.3,5.9l11.4,0.2l1.4,6.6l2.5,0.7l4.1-1.4l6.4,2.7l2.3,3l6.2,0.7l3.4,8.7l8.2,7.1l3.7-0.7l4.1,2.7l4.6,8.5l6.2,0.2l2.5-1.8l6.6,2.3l2.5,2.7l5.3,0.2l6.6-4.4l4.4,0.5l1.6,2l4.6-1.1l3-3.2l2.7-0.2l2.5,1.4l7.8-4.4l5-0.9l2.3-1.6l5.9,2.3l0.5,3l3.4,1.6l4.6-0.2l6.4,4.4l2.1,3.2l4.4,1.8l4.1-0.5l2.7-1.1l5.5,3.4l5,0.5l1.6-2l6.2,0.5l6.9,2.1l0.7,1.8l3.9,0.2l3-3.4l5.5-0.7l1.8,0.5l2.7-3.4l5.9-1.4l3.9,0.9l3.2,2.7l3.4-1.8l-0.9-1.6l3.2-3.2l6.4,0l2.3,1.1l3.9-1.1l0.9-3l3.7-2.7l2.5,0.7l4.4-0.7l2.1-1.1l3.9,1.1l2.7-2.7l3.4,0.5l3.9-0.2l3.2-3.2l-1.1-1.8l-4.1-2l-0.5-2l1.1-1.4l-0.7-3.2l-2.7-1.1l-3.7,1.8l-5-3.4l-6.4-0.7l-2.1-2.3l-2.3-4.1l-3.4-1.8l-7.1,1.4l-8,3.7l-3.4,1.1l-2.5-0.2l-4.1-2.1l-5.3,0.7l-2.3,1.4l-3,0.2l-2.1-3l-4.1-0.5l-2.1-4.4l-2.5,0.5l-2.5-3.4l1.6-3l-2.3-1.8l-0.5-3.7l-5.3-3.4l-0.2-3.2l-2.3-0.5l-0.5-3.4l-5.7-4.1l-3.4,1.4l-0.7-5.9l-2.1-3.2l-2.5-0.7l-2.1-3l0.2-2.1l-5.3-7.1l-5.5-1.6l-3.7-3.9l-3.7-1.1l-0.9-3.4l-4.1-2.3l0.2-2.7l-2.5-3.4l-0.2-5.5l-1.8-3.9l-4.4-3l-3.2-4.4l1.6-2l0.2-4.6l-0.7-4.6l-2.3-5.5l-4.6-4.6l-5.7-2.5l-3.7-4.4l-6.4-0.7l-2.1-4.1l-7.8-4.1l-2.7,0.2l-3.2-2.7l-3.7-0.7l-3.7-2.5l-2.1,0.7l-4.4-4.4l-2.5-0.5l-2.3-4.8l-7.6-4.4l-4.6-0.7l-3.7-4.4l-2.1-1.8l-3.7,0.2l-4.1-4.4l-1.1-7.6l-3.2-6.9l0.9-6.9l1.8-1.1l0.9-4.4l-3.4-3.2l-3-0.2l-3-3l-1.4-5l-3.7-2.3l-7.6,1.4l-3-3.4l-6.2,1.1l-3,5.5l-2.1-0.7l0.5-4.8l-3.4-3.9l-4.6,3.4l-3.4,0.2l-1.8,2.3l-5,0.7l-2.3-0.5l0-2.3l3.2-3l-2.3-5.3l-3.7-0.2l-3.9,3.7l-8.5,4.4l-7.6,4.1l-2.3,4.4l-6.2,5.5l-5.7,3.4l0.7,2.3l-5.5,3.2l-1.8-1.1l-4.1,2.7l-5,5.5l-3.4,1.1l-0.7,2.3l-8.5,1.8l-0.9,0.9l3.2,3.9l-1.1,4.4l-5.3,6.6l-5.9,5.7l-1.1,2.7l-6.6,4.4l-6.4,7.1l-3.4,1.1l-5.5,4.4l-4.4-0.2l-5.5,2.1l0.2-57.4Z', labelPos: [213, 530] },
  AZ: { d: 'M213.9,388.2l-1.6-1.4l-1.4-3.2l1.1-1.4l0.2-3l-2.3-2.3l-0.9-3.2l2.5-5l0.2-3.2l1.1-0.5l-0.5-2.7l-3.7-2.3l-2.1-3.4l-7.8-4.4l-2.3-2.1l-1.6-3.7l-3.9-0.9l-3-3l-0.2-67.9l-0.2-33.7l29.4,4.6l28.2,3.9l18.7,2.1l-9.4,95l-2.3,0.2l-1.8,3.2l-6.4,2.7l-2.1,2.1l0.2,4.8l-1.8,5l-4.8-0.5l-6.9,1.4l-2.7,5.3l-5.5,3l-2.5,2.1l0.5,4.4l-4.8-0.2l-1.8,2.1l0.2,1.6Z', labelPos: [267, 360] },
  AR: { d: 'M574.6,332.8l-3.5,3l-1.1,4.3l2.3,4.1l-0.5,2.5l-45.2,0.5l-24.3,0.7l0.5-4.4l2.1-4.1l-0.5-3.4l2.5-5l-2.5-3.9l0.7-2.7l3.4-3.4l-1.4-4.4l-0.2-4.1l1.6-6l2.3-3.4l-1.6-1.8l2.3-14.2l47.2-0.7l9.6,0l1.8,3l3.4,1.1l0.5,5l3.4,2.3l-1.1,6.9l-2.3,6.4l0.5,2.7l-2.3,7.3l0.7,5.5Z', labelPos: [538, 340] },
  CA: { d: 'M122.7,287.5l-1.9,0.2l-3.5-2.6l-0.9-4.2l1.5-2.2l-1.5-0.9l-1.3-3.5l-0.9-2.8l0.2-3.5l1.9-3.7l-0.2-2.2l-0.7-1.3l-2.2-0.9l-1.5-2.2l-0.2-3.5l-1.3-2.6l-0.7-2.6l-1.9-2.8l-1.3-4.2l-0.2-4.8l-1.5-3.9l-1.7-3.7l-1.5-2.4l-0.9-3.9l1.5-0.2l1.1-3l-0.2-2.2l2.8-3.3l2.2-5.9l-0.4-2.8l1.7-3l2.4-5.2l-0.2-1.7l1.7-3.3l1.9-7l1.5-2.4l-0.9-3.5l-2.6-4.4l-0.7-2.4l0.9-2.2l-1.1-3.5l-2.6-2.6l-1.5-3.9l0.4-2.4l-1.7-4.1l-0.4-3l-2.2-3.3l-0.2-2.2l-2.4-3.9l-1.1-4.1l-0.4-3.5l1.1-4.2l-1.3-3.5l-0.4-3l1.7-2.4l1.7-5.7l3.5-6.6l3.3-3.5l1.3-2.6l0.4-4.1l2.4-4.6l-0.5-3.5l1.2-3.4l0.7-5.5l2.8-4.8l1.5-6.1l1.3-4.6l2-5l0.9-5.2l-0.5-3l2-3.4l1.4,0.3l2.3,3.5l4.5,4.2l2.5,0.5l3.8,3.4l4.5,2.5l2.3,0.3l0.8,3l3.8,5.2l3.3,1.3l3,3.5l3,1.8l3,3.3l1.8-0.5l2.5,1l2.3,2.3l1.3,4l3.5,4l1.5,4.3l2.5,1l2,3.3l0.5,2.3l-0.8,5.8l0.3,2.8l2.8,4.3l0.8,3.3l0.3,5l4.5,6.2l0.3,2l1.8,2l4.5,7l2.8,2.5l1,4.8l2,1.8l1.3,4.8l-0.3,6.2l1,3.5l3.5,4l0.3,2.8l-0.5,2.3l0.5,2.5l2.5,0.3l0.3,3.3l-29.1-4.1l-28.4-4.4l0.5,3.2l2.7,3.9l1.4,4.1l3.4,2.1l2.3,3.9l0.2,2.5l4.1,5.5l0.5,4.1l-0.5,9.6l-1.1,4.4l2.5,4.6l1.4,5l0.7,4.6l-0.5,7.1l-1.6,4.6l-0.7,3l0.5,2.5l-1.8,2.5l-3.9,3.2l-2.3,3.4l-1.4,3.9l-1.6,0.9l-2.5,5l-3.2,3.4l-0.7,4.8l0.9,5.3l-0.7,4.8l1.4,5l-7.1,9.4l-3.7,3.4l-0.9,3.2l-6.4-0.2l-15.5-2.9Z', labelPos: [140, 240] },
  CO: { d: 'M370.6,226.3l-2.9,53.2l-35.9-2.3l-35-4.1l-34.6-4.8l-9.1-1.6l5.5-62.8l33.3,4.3l33.7,3.5l33.7,2.9l11.3,0.8Z', labelPos: [318, 240] },
  CT: { d: 'M852.2,151.4l-0.5,4.1l0.9,3.2l-1.6,2.5l-4.4,2.7l-3.9,3.9l-3.7-0.7l-2.7-0.2l-10.3,2.1l-0.2-2.5l1.8-5.3l0.5-5l-2.1-4.6l3.4-1.1l6.6-1.6l14.4-3l1.8,5.5Z', labelPos: [837, 158] },
  DE: { d: 'M820.9,213.5l0.2,1.8l-0.5,4.4l-2.5,5.5l-3.2,3.9l-2.5,0.2l-1.1-2.5l0.2-3.2l1.6-2.5l2.1-4.1l1.1-5.7l1.1-2.3l2.1,0.2l1.4,4.3Z', labelPos: [820, 220] },
  FL: { d: 'M700.3,421.5l5.7,9.4l5.5,10.5l3.4,7.6l4.6,8l4.4,4.8l1.1,4.4l4.4,6.4l-0.7,1.8l0.7,4.1l-2.3,0.2l-3-2.3l-2.5,0.9l-1.1-1.4l-2.5,0.2l-4.4-3.4l-0.7-4.6l-2.3-4.1l-3.4-5.5l-2.3-4.8l-3.7-3l-3.2-5.7l-2.1-5.9l-2.7-2.3l-0.5-3.2l-4.6-0.7l-2.5-2.5l-3.2-6.2l-5.5-2.3l-1.1-2.1l-4.4-1.4l-2.5,0.7l-2.3-0.5l-6.4-3.9l-5.7-1.8l-3.7-2.3l-2.3,0.9l-2.1-0.5l-5,1.1l-2.3-2.1l-5.5,3.9l-4.4,1.1l-0.7-2.3l-0.5-4.4l-3.4-0.9l-3.2-5l-5.3-1.1l-2.3,1.4l-4.6-0.2l-0.2-6.4l3-2.1l1.8-3.4l1.8-2.7l-0.7-2.7l3.2-0.9l5.5,1.6l5.5,0.5l7.3,1.4l11.9,0.5l5.7-0.2l14.8,1.6l12.4-0.2l6.9,1.8l0.5,3.7l5,0.2l4.6,2.5l3.9-2.3l0.2,7.3l3.2,3l1.4,4.1l1.8,0.9Z', labelPos: [700, 445] },
  GA: { d: 'M700.3,421.5l-1.8-0.9l-1.4-4.1l-3.2-3l-0.2-7.3l-3.9,2.3l-4.6-2.5l-5-0.2l-0.5-3.7l-6.9-1.8l-12.4,0.2l-14.8-1.6l1.1-4.4l-1.6-6.2l2.1-5l-0.2-2.7l-1.6-2.3l1.6-5.3l-2.5-5.3l2.5-4.4l-1.1-1.4l-0.5-4.8l-1.4-3.7l1.8-5.7l-1.6-4.1l3.2-6.9l3.2,0.2l4.4-3.2l5.5-0.7l4.4-2.1l8-0.7l6.2,3.7l3.7,3.4l5.3,4.6l0.7,3.9l2.5,3l0.5,2.3l5,5.3l2.1,5l-0.5,5.9l0.7,4.4l3.2,4.4l0,4.4l-1.8,6.9l1.4,2.7l-0.2,2.3l4.1,5l1.6,0.5l0.5,5.7l2.1,3.4l-0.2,2.5l2.1,1.8l-0.7,9.6Z', labelPos: [680, 370] },
  HI: { d: 'M233.1,519.3l1.1-3.4l3.9-2.1l1.1,0.9l-0.2,3.9l-2.5,2.1l-2.5,0.2l-0.9-1.6ZM246.9,515l6.9,0.5l0.9,1.8l-3.4,3l-4.6,0.2l-1.4-2.3l1.6-3.2ZM260.9,510.9l4.1,4.4l-0.2,1.6l-3.4,0.5l-2.5-1.1l-1.8-2.1l0.7-2.5l3.1-0.8ZM272.2,519.6l2.1,4.4l0.2,2.7l-1.4,1.8l-3.7-0.5l-0.9-4.1l0.2-3l3.5-1.3ZM291.1,532l-1.8,3.2l-0.7,4.1l1.1,1.4l4.1,1.6l4.4-0.5l4.8-1.4l4.1-2.3l-0.5-2.7l-2.1-2.7l-3-0.2l-3-1.4l-3.2,0.5l-2.7-0.5l-1.5,0.9ZM314.9,554.9l2.3,3.4l2.3,1.1l2.1-0.7l2.5,0.2l1.8,1.1l3,0.2l1.6-3.4l-0.5-2.3l-2.1-1.8l-3.2-1.8l-0.9,0.7l-2.5-0.9l-3,1.6l-2.5-0.5l-0.9,3.1ZM337.9,561.5l1.4,3.4l0.7,2.7l2.5,0.7l3.9-2.3l0.5-2.5l3-1.8l-0.5-1.4l-3.7-0.7l-2.3,1.6l-3.4-0.7l-2.1,1Z', labelPos: [305, 535] },
  ID: { d: 'M201.3,178.2l1.4-0.9l0.2-2.3l3.2-4.1l2.5-0.2l1.8-2.1l0.2-2.3l3.4-3.4l0.5-5l-0.9-1.4l0.9-4.1l3.9-4.4l0.5-3.9l-1.8-3.2l-2.3-0.7l-0.9-4.8l1.8-2.7l-0.5-2.5l0.9-2.3l1.1-7.1l3.7-5.3l-0.7-3.2l1.8-4.4l-2.5-5l0.9-2.5l0.2-5.5l-1.8-4.4l-2.3-2.5l0.2-1.6l-2.5-5.5l0.5-2.7l-3.2-4.6l-1.4-3.4l-3.2,0.9l-2.3,2.7l0.5,1.8l-0.2,7.8l-1.4,4.4l0.2,2.7l-1.4,3.2l-6,1.6l-3.2,3.9l-0.2,4.4l-4.1,6l-2.1,0.5l-1.1,2.1l-0.5,3.7l-3,2.7l-1.3,3.7l-3.7,0.7l-2.3,2.5l-3.4,0.9l-4.6,3l0.5,2.5l-1.1,5.3l0.7,2.1l-3.4,9.6l-5.3,9.6l-3.9,3.4l-0.2,3.7l-4.1,0.5l-2.3,1.6l0.5,2.3l-3.4,1.1l-3.5,1.2l7.3,53.2l23.5,3.4l6.6-44.3Z', labelPos: [195, 135] },
  IL: { d: 'M600.6,194.3l0.7-2.7l-0.5-6.2l-2.1-4.4l0.7-2.1l1.4-1.4l0.2-4.6l-2.1-2.7l-0.5-3l-1.8-2.5l-2.1-5.3l1.1-5.5l3.2-4.4l0.2-3.4l-0.5-3.7l-2.3-2.7l-0.7-7.1l2.1-0.9l0.5-3.7l-0.9-1.6l5.3-1.4l3.4-2.7l0.2-2.5l1.6-0.9l-0.7-2.7l-3.2-4.6l0.7-5l-0.5-3.7l3.7,2.1l5.3-2.1l3,1.8l2.1-0.2l2.7-2.7l5,0.7l0.7,1.4l0.2,3.4l3,2.3l-0.2,4.4l2.5,2.1l0,3.9l3.4,1.4l-0.2,2.7l3.9,5l0.2,3.2l-3.2,3.2l-0.9,3.2l0.5,5.3l-0.5,5l1.1,6l-1.6,2.1l1.1,2.7l3.4,2.1l2.5,3l0.7,3l2.1,2.1l-0.5,2.3l-2.5,1.4l-0.9,2.3l-3.9,1.6l-2.3,3.2l-0.5,3.7l0.7,2.5l-1.1,3.4l-3.2,3.2l0.2,2.5l-2.1,0.2l-1.8,3l-0.9-0.5l-3.2,1.1l-2.1,3.2l-2.5-0.7l-3.4-3l-4.4-0.2l-2.5-1.1l-2.7,1.1l-2.3,0.2l0.5-1.6l-0.9-2.3l-3-1.8Z', labelPos: [615, 230] },
  IN: { d: 'M637.9,188.9l1.6-2.1l3.7-0.7l2.5-2.1l2.5,0.7l1.8-3.4l3-0.9l0.2-0.9l0.9,0.2l1.4,2.1l2.7-0.7l0.7,2.3l3.2,2.5l-0.5,4.4l1.4,2.3l-0.7,2.3l0.7,4.8l-0.7,5.3l1.6,5l-1.1,6.6l0.7,4.1l-2.7,3.2l-2.5,4.1l0.2,1.8l-2.1,3.4l-0.7,2.5l0.7,3.4l-4.6,1.8l-3.9,3.2l-0.5,2.1l-22.3,2.3l-0.7-2.3l-1.8-0.5l1.6-3l-0.2-2.7l0.9-2.3l2.5-1.4l0.5-2.3l-2.1-2.1l-0.7-3l-2.5-3l-3.4-2.1l-1.1-2.7l1.6-2.1l-1.1-6l0.5-5l-0.5-5.3l0.9-3.2l3.2-3.2l-0.2-3.2l-3.9-5l0.2-2.7l10.5-1.1Z', labelPos: [655, 230] },
  IA: { d: 'M571.7,169.7l0.5,2.1l2.5,1.1l1.1,1.8l-0.7,3l-1.8,3.7l-0.5,4.1l-2.7,1.4l-0.2,2.1l-2.5,0.5l-2.5,3.4l-0.7,2.5l-3.7-2.1l-3-0.2l-1.4,1.6l-3.4,1.1l-3.9-1.4l-3,1.6l-2.1-1.4l-26.2,0.9l-24.6-0.2l-1.4-3l-0.9-4.4l-2.3-3.2l-0.5-2.1l0.9-3.9l-0.5-2.5l-2.1-1.4l-0.5-2.5l1.1-3.2l0.7-5.5l2.5-3.9l-1.6-2.1l-0.2-2.5l1.8-2.7l0-4.6l-2.1-3.4l53.4-1.4l28.7,0.2l2.5,2.3l2.3,3.7l3.9,1.1l1.1,1.4l-0.5,3.9l1.1,2.1l0,2.7l-1.4,2.7l0.9,2.3l1.8,1.1Z', labelPos: [535, 175] },
  KS: { d: 'M497.3,272l-0.2,28.9l-70.9-1.4l-48.1-2.3l2.3-41.8l55.5,1.4l60.5,1.6l0.9,13.6Z', labelPos: [440, 275] },
  KY: { d: 'M695.9,281.9l-3.2,3.2l-0.7,2.5l-7.8,6.9l-2.3,0.5l-1.1,2.5l-3.7,2.5l-1.6,3.4l-4.8,2.3l-2.5-0.2l-2.5,1.4l-4.6,4.6l-5-0.2l-3.2,1.8l-2.1,3.4l-3.4-0.7l-3,2.5l-1.6-0.7l-1.1,1.6l-2.3-1.6l-5.9,2.5l-1.4,1.1l-3-0.2l-3.9-3.4l-4.8,0.5l-3.4,2.7l-4.4-2.1l-2.7,1.8l-1.6-2.3l-4.1,0.5l-0.5-2.3l-2.5-0.5l-0.2-1.1l2.3-2.3l-0.7-2.1l-3-1.6l0.7-5l2.7-0.2l3.4-4.4l3.4,0.7l2.5-3l0.2-2.3l2.5-0.5l2.5-4.1l2.7-3.2l-0.7-4.1l1.1-6.6l-1.6-5l0.7-5.3l-0.7-4.8l0.7-2.3l-1.4-2.3l0.5-4.4l29.8-3l24.6-2.5l5.5-1.1l1.8,1.4l1.1,4.4l3.2,0.9l1.1,3.4l4.8,0.2l4.8,3.4l5.7-3.4l4.8,0.9l1.8,1.1l1.6,3.7l4.6,1.4Z', labelPos: [640, 290] },
  LA: { d: 'M574.6,432.4l0.2-2.5l-4.6-0.2l-25-0.2l-2.3,5.5l0.5,7.6l3.2,4.8l3.4,3.2l-0.9,3.4l-5,2.7l1.1,2.1l0.5,2.3l2.7,0.2l-0.2,1.8l-5.5-0.7l-5.3,1.4l-1.1,2.1l2.5,1.8l-2.1,1.4l-1.4,3.7l-0.5-1.4l-2.7,0.7l-0.5,3l-4.4,0.2l-1.8-3l-0.7,1.4l-3.2-3.2l1.4-3.4l3.2-1.6l-0.9-1.8l-3.4,0.7l-2.3,3.4l-1.4,5.3l-0.5-0.5l0.5-3l-1.8-1.1l-0.2-2.5l3.4-2.1l2.7-4.8l-0.2-2.7l-2.7-0.7l-0.2-2.3l2.3-1.8l0.5-6.4l-0.9-3.2l-0.5-4.8l-2.3-1.8l-1.6-2.5l-3.4,0.5l-1.6,0.9l-1.6-1.4l2.3-6.6l43.6-0.2l5,4.6l2.3,3.7l4.1,3l4.6,1.1l0.9,4.1l0.2,7.3l4.4,2.7l-1.1,4.4l2.5,0.7l0.5-1.6l1.4-0.2l-0.2,2.3l2.3,1.8l5-0.5l3.2,1.6l1.4-0.7l3.2,2.3l-1.1,2.1l3.2,0.5l2.7,2.7l4.8-3l3.4,1.1l1.4-1.4l-0.7-3.4l1.8-1.4l4.1,3l-1.6,2.5l1.6,1.4l3-0.5l1.6-2.7l2.7-0.5l3,2.1l-0.5,1.6l-1.6,0.2l0,1.8l-4.4,1.4l-2.7-0.7l-3.2,3.9l-4.8-1.4l-3.2,0.5l0,2.3l-2.7-0.5l-0.5-3.7l-7.3-2.7l-2.1-3l-6.2,2.1l-2.3,3.4l-4.4,0.2l0.2,2.1l-3.7,2.3l-3-0.7l0.5-3l-2.7-0.9l-0.9-2.3l-3.7,0.2l-0.7,3.4l1.4,2.5l-3,2.7l-0.2-1.1l-2.1-0.2l-0.5-3l-3.7-2.1l0.2-4.1l-2.5-0.5l1.4-4.1l-2.5-2.7l1.8-1.8l-0.7-2.5l-2.7-1.1l0.5-0.9l-2.3-0.2l-3-1.8l-0.7-3.4l-4.4-4.8l-0.5-3.4Z', labelPos: [555, 415] },
  ME: { d: 'M893,49.9l1.8,2.3l2.1,5.5l-0.9,5.3l-2.3,0.5l-1.6,6.4l-3.4,5.3l-1.1-1.4l-0.9,4.4l-1.4,1.6l-1.1-2.1l-0.2-4.4l-1.6-0.9l-0.7-4.4l-3-1.4l-0.2-2.7l1.4-2.5l-0.7-3.2l-3.2-3.4l-2.3-3.4l0.5-1.1l-0.7-4.4l-4.1-4.1l-3-6.6l1.6-1.6l-0.2-5.5l1.1-6.9l1.8-4.1l1.6-0.5l3.4,4.1l1.8-0.2l1.4,2.5l3.7,1.1l2.5-2.1l2.1-0.2l0.5,1.8l-1.8,4.1l1.8,2.5l0.7-0.9l1.4,1.1l-0.5,3.7l-0.9,0.7l-0.7,5.9l1.8,2.1l1.6-0.5l2.1,2.1l3,0.2l4.4,5Z', labelPos: [873, 65] },
  MD: { d: 'M820.9,213.5l-1.4-4.3l-2.1-0.2l-1.1-5.3l-4.4-1.8l-4.4,0.2l-0.5-4.1l-5.5-2.5l-4.4-0.2l-5-3l-5.7,0.9l-2.3,4.4l3.2-0.2l1.1,1.8l-1.4,2.7l1.1,2.5l2.7-0.5l1.4,2.7l2.1-1.1l1.6,1.6l-2.5,2.7l1.4,3.4l-0.7,2.5l-1.4,1.6l-2.7-0.2l-3.4-2.5l-1.8,0.5l-1.6-1.4l-1.8,0.5l-2.3-2.5l-5.9,2.1l-4.1-0.5l-1.1,2.3l-3.4,1.1l-0.2,3.2l1.8-0.9l3.9,0.7l-0.5-2.3l3.7-1.6l2.7-0.2l3.2,1.8l3,0.5l3.4-2.3l3-0.2l4.8,2.3l0.2,6.4l1.4,0.2l0.5-2.3l0.7,0.5l-0.5,3l3.4,3l2.5,0.5l3.9-0.2l3.4-4.4l2.3,3.9l3.2,0.5l3.2,2.1l-0.9,1.4l2.1,0.2l2.1-2.7l0.9-5.3l-0.9-3l2.5-5.5l0.5-4.4l-0.2-1.8Z', labelPos: [790, 220] },
  MA: { d: 'M891.2,144.9l0.2-2.1l-1.8-0.5l0.5-1.8l2.3-0.7l3.4,3l0.5,2.1l-2.5,0.5l-2.6-0.5ZM869.4,130.6l3.7-0.5l1.4,1.6l1.4-0.5l1.8,2.7l-2.5,0.9l-3.4-0.9l-3.2-0.5l0.8-2.8ZM852.2,151.4l-1.8-5.5l-1.4-0.7l1.4-3.4l-1.4-2.3l-4.4-1.6l2.5-4.8l-1.1-2.7l3.9-1.4l8.7-0.7l3.4-2.7l3.2-0.9l5.5,0.9l6-3.2l2.3,0.5l3.9,0l2.1,5l-3.2,0.5l-0.2,2.1l2.7,2.3l4.1-1.6l1.1,3l-2.5,3l0.5,1.6l-0.7,0.2l0.2,2.3l-1.1,1.8l-3,0.5l-0.5,2.3l-5.3-3l-3.2,0.2l-1.6-3l-2.3,0.5l-1.8,3.9l-5.7,2.3l-1.4,3.2l-6.6,1.6l-3.4,1.1Z', labelPos: [868, 143] },
  MI: { d: 'M624.6,137.9l3.4-4.6l2.7-1.4l5-0.5l1.1-1.4l1.4,0.2l0.7,3l3.9,0.9l1.6-0.7l0.5-2.7l1.4-0.5l1.4,1.4l4.1,0.5l0.5-0.7l-1.4-1.8l-0.2-4.8l1.4-1.4l0.7,0.9l0.7,4.4l3.4,0.9l4.1-2.5l0.7-2.5l-0.2-2.5l1.8-2.1l-1.6-4.1l-0.5-3l0.9-2.3l0.5-3.4l3.9-1.4l2.7-1.6l3.9,0.5l3.4,1.1l0.7,2.3l1.4,0.5l3.2-2.3l4.1-1.4l0.7,0.5l-0.5,3.2l-1.6,4.8l0.7,4.1l2.7,0.9l1.8-0.7l3.4,2.3l2.1-0.7l-0.2-1.4l1.1-0.2l2.1,2.3l0.5,1.4l-0.9,2.7l0.9,3.4l-1.8,5.3l-0.7,4.4l-2.3,0.2l-0.9,1.8l0.7,3.9l0,5.5l-1.4,1.1l0.5,2.1l-0.7,2.1l0.5,3.2l-2.1,0.7l0.2,1.4l-2.1-0.2l-3.2-0.7l-4.4,0.5l-1.8,1.4l-3.2,0.7l-3,3.4l-5.7,1.1l-2.7,2.3l-0.7-0.2l-3.2-0.7l-2.7,0.7l-1.4-2.1l-0.9-0.2l-3,0.9l-1.8,3.4l-2.5-0.7l-2.5,2.1l-3.7,0.7l-1.6,2.1l-1.8,0.5l-0.2-13.2l-2.1-2.5l-2.3-0.7l-0.5-0.9l-4.4-2.1l-2.1-3.9l0.2-1.8l-3.4-2.3l-0.2-8l-3-3.2l-1.1-2.7l0.5-0.9ZM572.7,55.8l3.9-1.4l3.7,0.7l5.3-0.5l1.6,1.4l-1.8,3l-2.7,1.6l-0.7,2.5l1.1,2.1l0.5,3l-2.3-0.5l-2.5-1.4l-0.7-2.3l-1.1-0.2l-1.4,0.9l-0.5,1.4l-2.5-3l0-4.6l-1.4-1.6l0.5-1.1ZM600.2,44.7l2.1-2.5l1.8,0.2l3,1.1l1.8-0.5l3.4,1.4l-1.4,1.1l-3.4,0.2l-1.8,1.1l-0.2,2.3l-1.1,0.7l-3.7-1.4l-1.8,0.5l-0.5-1.4l1.4-1.4l0.4-1.4ZM620.9,40.9l2.3-0.9l3.4,1.1l4.1-0.2l1.4,0.7l-0.5,1.4l1.4,3l-2.1,2.7l-0.5-0.5l-2.5-0.5l0.2-1.4l-2.1-0.2l-3.4,0.9l-2.1-0.2l-1.1-0.7l0.9-1.4l-0.2-1.8l0.9-2ZM669.9,56.2l-2.3,4.4l1.4,2.1l-0.2,1.8l2.1,3.9l-2.5,2.3l-0.5,1.8l0.2,3.4l2.3,0.2l0.7,1.4l0.5,6.4l3.4,4.1l0.2,1.6l-0.5,3l1.6,3.2l-0.7,5.7l-1.1,3.7l1.1,2.5l-0.7,2.5l0.9,1.4l-2.1,3.9l-2.7,1.1l-1.8-0.7l-2.5,1.4l-2.5-0.7l-3.4,2.3l-5.7,0l-2.3-0.5l-7.3-3.4l-3.9-1.1l-3-2.5l-4.6-5.5l2.3-0.2l3.2-1.8l5.7-1.1l3.2-2.7l2.5-0.5l3.7-4.4l2.3-0.7l0.5-2.3l1.4-2.7l-1.6-2.5l-0.5-3.7l-3.2-3.7l-2.7-0.5l-5.3-5l-4.4-1.1l-0.5-0.9l-5.9-1.4l-2.3-1.1l0.7-0.5l4.6,0.5l1.8-1.4l5.5-1.4l-0.5-1.6l-3.7-0.9l-1.8-3.4l-2.5-1.8l-2.5-0.5l-2.3-3.2l2.3-4.4l1.1-1.1l4.1-1.6l7.6-1.6l4.4,0.2l1.1,1.4l4.1,0.5l3.4-1.8l4.8-1.1l3.2,0.2l3.9,2.7l3.2,0.5l3.4-0.9Z', labelPos: [645, 105] },
  MN: { d: 'M568.5,127.1l-0.9-3.2l-2.5-3.9l-0.5-5.9l-2.5-5.9l-0.2-3.2l-1.4-3.4l-2.5-0.7l-1.6-3.9l0.2-4.1l1.1-1.8l-1.4-4.6l-0.2-11.2l0.7-2.5l-1.4-0.9l-0.2-4.4l24.4,0l0.2-11.9l2.5,0l0.5,1.6l3.4,0.2l1.8,3.9l1.4,0.7l0.5,3.2l3.4,1.8l3.4-0.2l0.5,2.5l5.9,0l0.2,2.3l6.2,0.7l0.2,2.3l-3.2,2.1l-4.4,4.4l-3.4,5.7l-0.5,5l1.4,3.9l-0.5,4.1l-0.9,0.9l5.3,7.6l1.6,0l1.1,2.5l4.4,0.9l0.5,3.2l-1.6,3l-0.2,3.4l0.7,3l1.8,0.5l0.2,4.1l2.1,2.3l3,0.5l1.6,1.8l-0.2,2.5l-3.7,0.7l-3.4,3.4l-4.8-0.2l-0.9,1.4l-0.9-0.7l-5,0.9l-4.8,4.4l-0.7,3.9l-1.6,2.7l-2.1-0.5l-3.9-3.2l-2.1,0.5l-3.9-0.9l-2.3-3.7l-2.5-2.3l-28.7-0.2Z', labelPos: [545, 90] },
  MS: { d: 'M597.8,420.9l-0.7-2.3l-3.7-1.4l-0.7-3.2l1.4-3.9l-3.4-1.6l0.7-3.4l-2.5-3.4l1.4-2.3l-1.1-3.4l0.2-2.5l-3.9-3l-0.5-4.1l-4.4-5.7l0.2-28.3l-0.7-8.2l3.5-3l-1.1-4.3l2.3-4.1l-0.5-2.5l9.6,0.2l0.7,2.3l3,2.5l0,14.7l1.8,6.4l-0.2,2.7l2.3,4.1l-1.6,8.9l1.8,2.5l-0.5,2.3l2.5,7.1l-0.5,3.9l1.6,0.2l-0.2,5.9l-0.7,3.9l1.8,0.7l0.9,3.7l3.4,3l0,3.9l-2.1,4.8l2.3,2.5l0.5,3.4l4.4,4.8l0.7,3.4l3,1.8l2.3,0.2l-0.5,0.9l-15.8,1.6l-3.5-0.3Z', labelPos: [585, 375] },
  MO: { d: 'M574.6,332.8l-0.7-5.5l2.3-7.3l-0.5-2.7l2.3-6.4l1.1-6.9l-3.4-2.3l-0.5-5l-3.4-1.1l-1.8-3l-4.6,0.2l-4.4-3.4l2.3-4.1l0.5-5l-1.1-3.4l-1.8-6.2l-3-1.6l-0.9-3.2l57.6,0l1.8,2.1l2.5,0.2l1.1,2.5l3,1.8l0.9,2.3l-0.5,1.6l2.3-0.2l2.7-1.1l2.5,1.1l4.4,0.2l3.4,3l2.5,0.7l-0.5,4.1l-3.2,3.2l-0.5,3.2l2.1,3.2l3.4,2.3l4.1,1.6l3,2.7l-1.6,3l-5,0.2l-2.7,1.1l-0.5,3.4l3.2,4.6l4.8,2.7l2.3,3.9l3,2.5l-0.2,2.1l-48.4,1.1l-27.2,0.5Z', labelPos: [565, 280] },
  MT: { d: 'M315.7,55.5l0.5,11.3l0.7,9.8l1.4,14.4l0.9,16.7l-0.5,10.3l0.5,11.4l-44.7-2.5l-44.1-4.6l-23.5-3.4l3.4-27.9l-0.3-1.4l1.5-5.3l-0.7-3.4l0.7-3l-0.5-2.3l1.6-4.1l-2.3-4.1l-0.7-1.1l1.6-3.4l-1.4-1.6l0.5-3.4l3.2-0.5l2.3-3l1.1-4.6l3.9-2.5l1.4-3l4.4-2.5l0.7-0.5l-0.7-4.8l2.1-0.2l1.1-1.8l0.2-3.2l3-1.6l0.9-2.3l-0.5-3.4l2.1-0.5l2.5,2.5l3.7-0.2l1.6,1.4l4.6-0.9l1.4-1.4l3.7,0.7l4.1-0.7l1.1,1.4l5.7,0.9l3.4-2.3l3.4,0.2l0.7-1.4l4.6,0.7l3.9-0.7l-0.2,1.6l4.1,1.1l3.2,1.1l-0.5,3l3,3l0.7,1.8l-0.2,4.4l1.6,3l4.1,1.8l2.5,0l1.6,2.5l4.6,0.7l1.8,1.4l1.6,2.3l4.6,0.5l3.2,3.2l3.7,0.7l3.2,1.8l1.4,3l0.5,4.6l1.4,0.7l0.2-0.9Z', labelPos: [240, 75] },
  NE: { d: 'M490.2,184.3l-0.2,3l-2.1,1.4l0.5,2.5l-0.9,3.9l0.5,2.1l2.3,3.2l0.9,4.4l1.4,3l-0.9,13.6l-55.5-1.4l-55.5-3.2l3.4-32.3l26.4,1.4l35.7,1.4l27.6,0l-0.5,4.1l3.4,1.8l7.1,0.2l3.4-1.6l3.5-2.5Z', labelPos: [430, 200] },
  NV: { d: 'M169.7,285.3l-19.5-30.4l-0.5-3.2l28.4,4.4l29.1,4.1l-0.3-3.3l-0.5-2.5l0.5-2.3l-0.3-2.8l-3.5-4l-1-3.5l0.3-6.2l-1.3-4.8l-2-1.8l-1-4.8l-2.8-2.5l-4.5-7l-1.8-2l-0.3-2l-4.5-6.2l-0.3-5l-0.8-3.3l-2.8-4.3l-0.3-2.8l0.8-5.8l-0.5-2.3l-2-3.3l-2.5-1l-1.5-4.3l-3.5-4l-1.3-4l-2.3-2.3l-2.5-1l-1.8,0.5l-3-3.3l-3-1.8l-3.3-1.3l-3.8-5.2l-0.8-3l4.8-27.4l44.8,8.5l-12.8,85l2.3,0.2l1.8-3.2l2.3-0.2l-0.2,4.4l-7.1,9.4l-1.4-5l-0.7-4.8l0.9-5.3l-0.9-4.8l0.7-3l-0.5-2.5l-2.5-4.6l1.1-4.4l0.5-9.6l-0.5-4.1l-4.1-5.5l-0.2-2.5l-2.3-3.9l-3.4-2.1l-1.4-4.1l-2.7-3.9l-0.5-3.2Z', labelPos: [180, 220] },
  NH: { d: 'M868.2,105.3l-0.7-1.4l1.1-1.4l0.2-3.7l-2.3-0.9l-0.5-3l-2.7-0.2l-1.8-2.5l0.5-2.1l-0.5-3.9l0.9-4.8l-0.5-2.5l-1.6-0.5l-1.4-3.9l1.1-2.5l-0.2-7.1l0.7-5.3l-0.5-1.1l0.7-2.5l-2.3-0.5l-0.2-1.6l1.8-1.8l0.9-3.9l-0.5-2.1l0.5-4.4l1.4-0.2l1.6,2.5l4.6,0.7l1.8,1.8l3.4-0.2l2.5,1.8l0.7,3l-3.2,1.4l-0.2,1.4l0.7,0.7l0.2,3.7l-2.1,6.2l0.2,2.3l-0.5,4.4l1.1,4.8l0.2,2.3l1.8,0.9l3.2,3.4l0.7,3.2l-1.4,2.5l0.2,2.7l3,1.4l0.7,4.4l1.6,0.9l0.2,4.4l1.1,2.1l-1.4-1.6l-5.5,0.9l-4.1,0l-2.3-0.5l-1.1-2.6Z', labelPos: [866, 76] },
  NJ: { d: 'M830.7,173.9l2.1,0l3-1.6l1.4-0.5l2.3,1.8l-0.2,3.7l-1.4,1.4l-0.2,1.8l2.3,3l-0.7,2.1l0.9,1.4l-1.1,2.1l-0.2,4.4l1.8,2.5l2.3,0.9l4.8,6.9l-0.7,0.9l-2.3-0.2l-1.4,3.9l-1.8,1.1l-0.2,2.3l-0.7,1.1l-0.7-0.9l-0.5,3.9l-2.3,0.5l-1.4-1.6l-0.2-2.1l1.4-1.1l-0.5-1.8l0.7-3l-1.1-1.4l-1.6-0.7l1.8-1.4l-0.2-4.8l-3.9-3.2l0.2-2.3l-1.6-0.7l-0.5-5l-1.6-3.2l1.4-1.1l1.8-3.7l-1.3-5.4Z', labelPos: [836, 195] },
  NM: { d: 'M295.3,281.1l-7.4,62.3l-4.3-0.5l0.5,4.1l-37.9-4.6l-37.2-5l7.4-53.9l1.6,0.2l1.8-2.1l4.8,0.2l-0.5-4.4l2.5-2.1l5.5-3l2.7-5.3l6.9-1.4l4.8,0.5l1.8-5l-0.2-4.8l2.1-2.1l6.4-2.7l1.8-3.2l2.3-0.2l9.4-95l33.5,4.3l-5.5,62.8l2.3,23.3l2.2,36.4Z', labelPos: [273, 320] },
  NY: { d: 'M830.6,173.9l-2.5-2.1l-3.2-0.7l-3.4,1.6l-2.5-1.1l-4.6-4.1l-5.5-2.3l-2.3,0.9l-2.7-0.2l-14.2,5.3l-4.6,3.2l-19.1,4.8l-4.6-0.5l-0.2-3.4l2.5-1.6l0.2-3.4l1.8-3l1.1-4.1l4.8-5.3l4.6-3.9l3.2-1.8l5.3-1.4l8.5-0.2l0.5-1.4l4.4-1.8l4.6-0.2l2.7,1.4l5-2.3l5.3,0.9l4.4,4.4l3.7,1.1l4.4-1.8l3.7,2.5l-1.4,2.3l1.6,1.4l-0.7,2.5l-2.3,3.2l-0.2,2.7l3,3.9l-0.7,3l-3.2,2.8Z', labelPos: [800, 135] },
  NC: { d: 'M807.9,294.1l-4.8-0.5l-3.9,2.3l-3.2-0.2l-3.4,4.1l-4.1,6.4l-3.2,1.8l-1.6,2.3l-2.3-0.5l-0.2-3l-5.3,3.4l-2.3,3l-3,0l-0.7,2.1l-3.4,2.1l-4.8,0l-2.3,1.1l-0.7,3.9l-4.4,0.2l-1.4-0.5l-1.6,3.2l-4.4-0.2l-0.7-2.7l-2.1,0.9l-1.8,2.7l-4.6,2.7l-0.9-1.6l-3.7-0.2l-3.7,1.4l-3-0.2l-4.1-2.5l-0.5-2.5l-3.4-1.4l-0.7,1.4l-3.7-1.4l-2.5,2.7l-2.5,0.5l-0.2,2.3l-2.5,3l-3.4-0.7l-3.4,4.4l-2.7,0.2l-0.7,5l-2.1-0.2l-1.4,1.4l0.2,1.6l-8,0.7l-4.4,2.1l-5.5,0.7l-4.4,3.2l-3.2-0.2l3.2-6.9l-1.6-4.1l-1.8-5.7l25.9-3l27.3-4.1l13.2-2.1l5.7-1.8l5.3,0.9l3.4-2.5l3.7,0.5l0.7-5.5l3.2-0.9l1.8-2.3l4.4-2.3l2.5-3.9l4.4,0.5l2.1-2.7l1.4-0.2l1.1,1.4l2.5-2.1l-0.2-1.8l1.8-1.1l4.4,2.3l3.9-0.9l2.5-3.4l4.1-2.5l3.4,0.7l1.4-2.1l4.6-0.5l3.9-1.8l3.2-0.2l0.2,6.4l-0.2,3.5Z', labelPos: [740, 305] },
  ND: { d: 'M491.7,55.3l1.6,5.5l-0.5,4.1l3.2,6.4l0.2,3.4l0.5,7.6l1.4,2.7l0.5,4.4l-0.2,3.4l2.1,5l0.2,2.1l-45.1-0.5l-39-1.4l-0.7-10.6l-0.5-11.3l-0.7-9.8l-0.5-11.3l41.9,1.8l37.1,0Z', labelPos: [460, 75] },
  OH: { d: 'M696.9,187.5l3.4,3.4l3-0.2l2.5,3.2l4.4,1.8l0.2,3.4l4.4,4.4l2.3-0.9l4.6,2.3l-0.7,5l-2.3,4.4l0,3.2l-1.6,4.8l0.7,3l-2.5,3.2l0.5,1.6l-2.1,2.7l0.5,2.1l-3.4,2.3l-2.1,3.2l-1.6,4.6l-2.7,3.7l-4.6-1.4l-1.6-3.7l-1.8-1.1l-4.8-0.9l-5.7,3.4l-4.8-3.4l-4.8-0.2l-1.1-3.4l-3.2-0.9l-1.1-4.4l-1.8-1.4l-5.5,1.1l-24.6,2.5l2.5-4.1l2.7-3.2l-0.7-4.1l1.1-6.6l-1.6-5l0.7-5.3l-0.7-4.8l0.7-2.3l-1.4-2.3l0.5-4.4l-3.2-2.5l-0.7-2.3l15.3-1.4l26.5-2.8l4.9-0.5l1.6,1.9Z', labelPos: [680, 230] },
  OK: { d: 'M429.7,296.6l0.2,11.2l3.2,3l2.5,0.9l0.2,1.8l3.9,2.7l1.8,3l3.4,1.4l2.3,2.5l3.4-0.2l3.4,1.1l3.7-3l2.5,0.9l3-0.5l3.2,1.4l2.5-1.6l3.4,0.9l2.7-2.5l1.6,0.5l3-1.1l3.9,0.5l2.3,2.1l2.5-0.2l2.3,0.7l3-3l0.7,0.5l-0.5,4.4l2.1,4.1l-0.5,3.4l-45.2,0.5l-24.3,0.7l-24.1-0.2l-24.8-1.4l-23.4-1.4l-0.5-15.1l27.2-0.9l-2.5-21.9l47.6,1.5l0,9.9Z', labelPos: [455, 315] },
  OR: { d: 'M150.5,130l-0.8-2.7l0.8-2.5l3.3-4.3l1.3-3.8l-0.5-0.8l1.5-3.8l5-6l1-3l3.3-4.3l0.3-2.3l-2.5-3l0.5-1.8l-0.8-4l3.3-5.3l0.8-4.5l-0.5-3.5l4-2.8l3.3-1.3l2.3,1l-0.3,4l1.8,2.8l2.5,1.3l4,0.5l2.5,2l3.8,0.8l3.3-0.8l0.8-3l3-0.8l2.8,0.8l0.3,2.5l7.8,2.3l1,2.5l4.5,1.3l4.3,0.3l4,2.8l5.5,2l0.3,0.8l-4.8,27.4l2.3,3.2l3,3.3l1.8-0.5l2.5,1l1.3,4l3.5,4l1.5,4.3l2.5,1l2,3.3l0.5,2.3l-0.8,5.8l0.3,2.8l2.8,4.3l0.8,3.3l-44.8-8.5l-47.9-10.7l-2.5-4.3l-1.7-6l0.2-3l-3.5-6.5Z', labelPos: [130, 105] },
  PA: { d: 'M830.6,173.9l0.1,0l1.3,5.4l5-1.1l3-0.5l39.5-8.5l2.3,1.4l-0.5,3l-3.4,3.4l-1.6,2.3l-1.4,4.1l-0.5,4.1l-1.6,2.7l-0.2,3.7l3.7,3.9l-1.1,1.4l-9.4,4.8l-3,2.3l-1.8-0.2l-2.3,1.8l-3.7,1.1l-2.5,1.8l-3.2,0l-8.7,4.1l-3,0.5l-2.5-0.5l-2.1,1.1l-2.7,3.7l-1.1-0.5l-5,2.7l-3.4-0.5l-2.1,0.9l-32.1,6.9l-9.4,1.1l-1.9-9.4l-1.5-1.5l-0.5-3.4l21.3-4.6l3.9-1.4l2.5-3.2l2.3-1.4l-0.2-1.8l2.5-1.6l0.2-3.4l1.8-3l1.1-4.1l4.8-5.3l4.6-3.9l3.2-1.8l5.3-1.4l8.5-0.2l0.5-1.4l4.4-1.8l4.6-0.2l2.7,1.4l5-2.3l5.3,0.9l4.4,4.4l3.7,1.1l4.4-1.8l3.7,2.5l-1.4,2.3l1.6,1.4l-0.7,2.5l-2.3,3.2l-0.2,2.7l3,3.9l-0.7,3l-3.2,2.8Z', labelPos: [775, 195] },
  RI: { d: 'M867.6,152.2l-1.4-6.4l-1.1-4.6l5.3-1.6l1.8,2.1l2.5,3.7l2.3,3l-1.1,1.4l-2.7-0.5l-1.1,1.8l-2.7,1.4l-1.8-0.3Z', labelPos: [867, 147] },
  SC: { d: 'M729.2,329.7l-2.7,1.8l-2.3,4.1l-2.7,2.5l-4.6,6l-5,3.7l-3.4,4.6l-3.4,2.5l-2.5,5l-4.6,3.7l-2.5,3.4l-2.3-0.7l-0.9-3l-3.2,0l-0.2,2.5l-1.6,0.9l0.9,2.7l-2.1,3.4l-4.4,1.8l-1.1-0.7l-0.7,1.6l-2.5-0.5l-1.1-3.9l-3.7-0.9l-1.4-2.5l-2.5,0.5l-1.6-2.5l-4.8,0.5l0.7-9.6l-2.1-1.8l0.2-2.5l-2.1-3.4l-0.5-5.7l-1.6-0.5l-4.1-5l0.2-2.3l-1.4-2.7l1.8-6.9l0-4.4l-3.2-4.4l-0.7-4.4l0.5-5.9l-2.1-5l-5-5.3l0.2-1.6l25.9-3l27.3-4.1l7.1,4.4l3.4,6.9l7.3,3l8.7,8.5l-2.2,4.3Z', labelPos: [695, 345] },
  SD: { d: 'M453.3,98.2l0.5,3l-2.1,4.6l0.2,2.3l4.1,4.8l0.5,2.7l-0.5,3.2l3.4,5.9l0.5,2.1l-0.5,17.7l-1.8,2.7l0.2,2.5l1.6,2.1l-2.5,3.9l-0.7,5.5l-1.1,3.2l0.5,2.5l2.1,1.4l-35.7-1.4l-26.4-1.4l-27.6,0l0.5-33.4l-0.5-24.6l39,1.4l45.1,0.5l-0.3,1.1Z', labelPos: [420, 135] },
  TN: { d: 'M695.9,281.9l-4.6-1.4l-7.8,4.1l0.2,2.7l-4.4,4.1l-3.4,1.4l-1.6,4.1l-4.1-0.2l-3.7,4.1l-2.3-0.5l-3.2-1.8l-0.7-3l-2.7,0.2l-0.2,2.7l-3.9-0.5l-0.9-2.5l-2.7-0.7l-5.7,3.9l-0.5,2.3l-5,1.4l-3.2,3.4l-4.8,1.4l-4.4,2.3l-3.2-1.4l0.9-4.6l-3.4-1.6l-4.4,1.4l-3.9-2.3l-2.1,0.9l-5.9-1.6l-4.6,1.8l-10.4,0.5l-32.4,3.5l-2.3,14.2l1.6,1.8l-2.3,3.4l-1.6,6l0.2,4.1l1.4,4.4l-3.4,3.4l-0.7,2.7l-0.5-2.1l-2.1-0.5l0-14.7l-3-2.5l-0.7-2.3l45-4.8l8.9,0.2l2.1-3.4l3.2-0.9l2.5-4.4l1.8-0.5l3.9,1.6l2.1-1.4l4.1-0.7l1.1-2.7l1.4-0.2l0.9,1.1l4.4-2.7l2.5-3l7.8,0.2l0.5-2.3l2.7-0.9l3.2,1.1l3-2.5l3.4,0.7l2.1-3.4l3.2-1.8l5,0.2l4.6-4.6l2.5-1.4l2.5,0.2l4.8-2.3l1.6-3.4l3.7-2.5l1.1-2.5l2.3-0.5l7.8-6.9l0.7-2.5l3.2-3.2Z', labelPos: [620, 310] },
  TX: { d: 'M429.8,307.8l-3.2-3l-0.2-11.2l0-9.9l-1.4-17.4l24.1,0.7l24.8,1.4l23.4,1.4l0.5,15.1l-2.3,6.6l1.6,1.4l1.6-0.9l3.4-0.5l1.6,2.5l2.3,1.8l0.5,4.8l0.9,3.2l-0.5,6.4l-2.3,1.8l0.2,2.3l2.7,0.7l0.2,2.7l-2.7,4.8l-3.4,2.1l0.2,2.5l1.8,1.1l-0.5,3l1.4,3.4l0.5,0.5l-2.5,0.5l0.5,3l-1.4-0.5l-1.4,1.6l0,2.7l-1.4,7.3l2.3,3l0.2,2.5l-0.7,4.4l0.5,6.9l1.4,3.4l-1.8,5.3l-3.4,6.4l0.2,2.7l0.2,2.5l0.9,3.4l1.8,0.5l1.4,4.6l1.6,1.6l-0.5,2.7l0.5,5l3.2,1.4l1.4,1.4l-0.5,4.4l-2.3,3.2l0.5,0.9l-3.2,0.7l-6.9,3.9l-0.9,3.9l-4.1,1.4l-0.9,2.5l0.9,0.5l-1.1,2.5l-2.5,1.4l-4.1,1.6l-3.4-1.1l-0.5,1.8l-6.6,0.5l-2.3,1.1l0.7,4.4l-2.5,1.4l-0.2,3.2l-0.5,0.9l-2.7-2.1l-2.5-0.2l-0.9,0.9l-1.4-0.5l-2.7,1.6l0.2,2.5l-0.9,3.2l-1.4,1.1l-1.4-0.7l-0.9,0.5l-1.1-2.1l-2.5,0.2l0.2-1.6l-4.1,0.7l-0.2-2.1l-2.5,1.4l0.2,1.4l-2.3,0.7l-2.3-0.7l-0.7,2.3l-3.9-1.6l0.7-2.5l-5.3,0.5l-4.4-1.8l-4.8-0.2l-2.1-0.7l-1.8,2.3l-3.2-0.2l-2.5-1.4l-4.4,3.4l-3.7,0.7l-0.9-0.9l-3,0.7l-4.1-2.7l-2.5,0.9l-2.3-0.5l-2.3-2.5l-1.4,1.4l-4.4-1.4l-0.7-1.4l0.5-1.6l-1.8-2.5l0.7-2.3l-1.4-2.3l-2.7-2.1l-4.4-7.3l-5-0.9l0.2-1.4l-4.6-6.2l-0.9-3.4l-2.1-2.3l-0.2-2.1l-2.5-4.1l-4.4-4.4l-1.1-3.9l-4.6-4.4l0.7-8.7l-0.9-1.6l0-3l-3.2-5l-0.2-1.8l-3.7-0.7l-3.2-3.9l-0.9-4.6l-3.2-1.1l-3-5.9l0.9-1.8l-2.3-3.4l0.9-6l-0.9-4.8l1.8-6.4l1.1-1.1l-0.7-1.8l1.1-4.4l2.5-1.6l-0.9-0.5l0.2-3.7l-1.1-2.3l3.2-5.3l4.3,0.5l7.4-62.3l35.9,4.1l35,4.1l2.9-53.2l35.8,2l-2.3,41.8l48.1,2.3l-0.9,14.6l-2.5,1.6l-3.4-0.9l-2.5,1.6l-3.2-1.4l-3,0.5l-2.5-0.9l-3.7,3l-3.4-1.1l-3.4,0.2l-2.3-2.5l-3.4-1.4l-1.8-3l-3.9-2.7l-0.2-1.8l-2.5-0.9l-3.2-3l-0.1,0Z', labelPos: [390, 395] },
  UT: { d: 'M257.3,206.5l-34.6-4.8l5.7-47.5l33.3,4.8l-2.1,23.9l-2.3,23.6Z', labelPos: [252, 220] },
  VT: { d: 'M852.1,100.5l0.9,2.3l-1.1,3.4l1.4,2.5l0.5,6.6l-0.9,2.1l-1.4,8l0.7,3.2l-3.9,1.4l1.1,2.7l-2.5,4.8l-19.5,4.4l-0.2-2.5l-0.5-5l1.4-0.2l0.5-4.4l-0.5-2.1l0.9-3.9l-1.8-1.8l0.2-1.6l-2.5-1.8l-3.4,0.2l-1.8-1.8l-4.6-0.7l-1.6-2.5l-1.4,0.2l0.2-3.7l1.6-5.3l-0.9-2.1l0.9-2.1l20.8-5.3l3.7-0.7l2.1,4.4l3.7,0.2l1.1,0.5l3.9-0.2l2.3,0.5Z', labelPos: [833, 110] },
  VA: { d: 'M807.9,294.1l-0.2-3.5l-0.2-6.4l-3.2-0.2l-3.9,1.8l-4.6,0.5l-1.4,2.1l-3.4-0.7l-4.1,2.5l-2.5,3.4l-3.9,0.9l-4.4-2.3l-1.8,1.1l0.2,1.8l-2.5,2.1l-1.1-1.4l-1.4,0.2l-2.1,2.7l-4.4-0.5l-2.5,3.9l-4.4,2.3l-1.8,2.3l-3.2,0.9l-0.7,5.5l-3.7-0.5l-3.4,2.5l-5.3-0.9l-5.7,1.8l1.6-5.3l-2.5-5.3l2.5-4.4l-1.1-1.4l-0.5-4.8l-1.4-3.7l1.8-5.7l3.4-2.1l0.7-3.9l2.3-1.1l4.8,0l3.4-2.1l0.7-2.1l3,0l2.3-3l5.3-3.4l0.2,3l2.3,0.5l1.6-2.3l3.2-1.8l4.1-6.4l3.4-4.1l3.2,0.2l3.9-2.3l4.8,0.5l0.5-1.4l1.4-0.9l0.5-4.1l1.6-1.8l-0.5-4.1l3.2-4.1l0.9,1.8l4.1,3.4l0.5,4.4l3.9,1.8l3.7-2.1l3.7,7.6l1.8,6l2.5,2.3l-1.6,4.4l2.3,1.8l-0.2,2.1l-2.1,2.1l1.6,1.1l0.5,2.5l-1.6,2.7l-0.2,2.7l3.2,2.7l2.3,3.9l3.9,3l-0.9,2.3Z', labelPos: [770, 260] },
  WA: { d: 'M149.3,15l4,1.3l4,2l4.5,0.5l2.5-0.8l4.5,1l2.5,0.3l1.5,2l3,0l4.8,1.3l-1,2.5l1.8,2l1,3.3l2.3,3l-0.3,2.5l1.5,3.5l-0.8,1.3l-0.5,3.3l-2.3,0.3l-1.3,1.5l-0.3,3l-3.5,0.5l-3.3,3.3l-0.5,3.3l0.8,2.5l-0.8,1l0.5,4.5l0.8,3.5l-0.3,3.5l-5.5-2l-4-2.8l-4.3-0.3l-4.5-1.3l-1-2.5l-7.8-2.3l-0.3-2.5l-2.8-0.8l-3,0.8l-0.8,3l-3.3,0.8l-3.8-0.8l-2.5-2l-4-0.5l-2.5-1.3l-1.8-2.8l0.3-4l-2.3-1l-3.3,1.3l-4,2.8l0.5,3.5l-0.8,4.5l-3.3,5.3l0.8,4l-0.5,1.8l2.5,3l-0.3,2.3l-3.3,4.3l-1,3l-5,6l-1.5,3.8l0.5,0.8l-1.3,3.8l-3.3,4.3l-0.8,2.5l0.8,2.7l-0.5-0.3l-1-2.3l-3.3-1.8l-2,0.8l0-2l-2.5-0.3l-3.8-2.8l0.8-4l-1-2.8l0.5-3l-1.8-0.3l0.3-4.5l-2.3-0.3l-0.5-2.3l-3-2l0.5-10.5l2.5-0.3l1-2.8l2.3-0.3l0.5-5.3l-1.8-3.3l0.5-11.3l1.5-0.3l1-3.5l3.3-0.8l0.8-1.8l4-0.3l5.3-3.3l3.8-0.3l3.3-2.8l2.5,0.5l3-1.3l-0.8-3l1.3-3.8l2.8-2l-0.3-2.8l4-0.3l2,3l1.8-0.5l1,1l5-0.3l0.5,1.3l3.3,0l0.3,4.8l1,1.3l0.5-0.5l1-2.8l2.5,1l4.3,0.3l2,2l2.8-1l3.8,1.5l2.3-2l3.8,0.5l0.5,0.5Z', labelPos: [140, 45] },
  WV: { d: 'M756.7,227l0.9,3l-0.9,5.3l-2.1,2.7l-2.1-0.2l0.9-1.4l-3.2-2.1l-3.2-0.5l-2.3-3.9l0.5-2.3l-0.2-6.4l-4.8-2.3l-3-0.2l-3.4,2.3l-3-0.5l-3.2-1.8l-2.7,0.2l-3.7,1.6l0.5,2.3l-1.4-0.2l-0.2-6.4l-4.8-2.3l-3,0.2l-3.4,2.3l-3-0.5l-3.2-1.8l-0.2-3.2l3.2-4.1l0.5,4.1l-1.6,1.8l-0.5,4.1l-1.4,0.9l-0.5,1.4l-3.9-1.8l-0.5-4.4l-4.1-3.4l-0.9-1.8l2.7-3.7l1.6-4.6l2.1-3.2l3.4-2.3l-0.5-2.1l2.1-2.7l-0.5-1.6l2.5-3.2l-0.7-3l1.6-4.8l0-3.2l2.3-4.4l0.7-5l8.3,6.6l1.1,3.4l3.9,3l-1.4,5.3l1.4,3l2.5,0.5l0,3.4l4.4,1.4l1.8,2.7l1.1-0.5l2.3,3l-0.5,2.7l3.7,0.2l1.1,1.4l0.5,3l-2.3,3l0.9,1.1l-2.1,2.7l-0.2,3l2.5,2.3l2.5,4.4l3.7-0.9l1.8,0.9l0.9,2.5l2.3-0.2l0.9-1.6l2.5-0.9l2.5,3Z', labelPos: [740, 240] },
  WI: { d: 'M571.5,85l1.3,0.9l-0.7,2.5l0.2,2.5l1.6,1.8l-0.9,2.3l0.9,1.6l2.5,0.7l1.4,2.7l6.4,3.7l2.7,0.9l-0.2,2.5l1.8,0.7l0.2,1.6l4.1,2.3l0.5,1.6l-0.5,2.3l0.5,3l1.8,1.1l0.5,2.3l-0.7,5.3l-0.5,2.5l0.7,1.6l-0.5,4.4l-1.6,4.8l0.2,2.5l-0.9,2.5l-0.5,5l1.4,3.7l-0.2,2.5l0.5,3.7l-0.7,5l-1.8-1.1l-0.9-2.3l1.4-2.7l0-2.7l-1.1-2.1l0.5-3.9l-1.1-1.4l-3.9-1.1l-2.3-3.7l-2.5-2.3l-1.8-0.5l-0.2-4.1l-2.1-2.3l-3-0.5l-1.6-1.8l-0.2-2.5l3.7-0.7l0.2-2.5l-1.6-1.8l-2.1-2.3l-3-0.5l-0.5-3.2l-4.4-0.9l-1.1-2.5l-1.6,0l-5.3-7.6l0.9-0.9l0.5-4.1l-1.4-3.9l0.5-5l3.4-5.7l4.4-4.4l3.2-2.1l-0.2-2.3l-6.2-0.7l-0.2-2.3l-5.9,0l-0.5-2.5l-3.4,0.2l-3.4-1.8l-0.5-3.2l-1.4-0.7l-1.8-3.9l-3.4-0.2l-0.5-1.6l-2.5,0l-0.2,11.9l0.5,2.7l1.6,0.7l0.5,1.6l-0.5,4.4l-2.1,1.6l-0.2,2.1l1.4,0.7l0,4.4l-2.3,1.4l0.5-4.6l-1.1-0.5l-1.1,2.7l-0.5,3.4l-1.4,1.4l-0.2-5.7l-2.3-0.2l-1.4-1.8l-2.3,3.7l-2.5-0.2l-1.6-0.9l0.2-2.3l0.9-2.1l-0.2-3l1.8-4.1l-0.9-1.8l0.9-3.4l2.1-2.5l0.5-2.1l-1.1-0.7l2.1-4.1l2.1-2.3l-0.2-1.8l2.7,1.6l3.7-0.5l1.1-1.8l0.9,0.7l3.9-0.5l1.1-2.7l2.5-0.5l0.5-1.1l2.5,1.4l1.4-0.2l1.6,1.4l5,0l0.9,0.7l5.5-2.5l0.7-1.8l1.6,0.9l2.3-1.1l4.8,2.1l1.8,2.3l3.2,0.9l2.6,1.5Z', labelPos: [555, 130] },
  WY: { d: 'M315.7,129.3l-0.5-11.4l0.5-10.3l-0.9-16.7l-1.4-14.4l-0.7-9.8l-0.5-11.3l35.4,3.4l33.5,2.3l33.5,1.4l0.5,24.6l-0.5,33.4l-33.7-2.9l-33.7-3.5l-31.5-4.7Z', labelPos: [355, 100] },
  DC: { d: 'M791.5,232.6l-1.4-1.4l-1.6,0.5l1.1,3l1.9-2.1Z', labelPos: [795, 233] },
};

export function USMapChart({
  data,
  colorScale = ['#DBEAFE', '#1E40AF'],
  onStateClick,
  selectedState,
  className,
}: USMapChartProps) {
  const dataMap = useMemo(() => {
    return new Map(data.map((d) => [d.state, d]));
  }, [data]);

  const maxValue = useMemo(() => {
    return Math.max(...data.map((d) => d.value), 1);
  }, [data]);

  const getColor = (value: number) => {
    const ratio = value / maxValue;
    const [r1, g1, b1] = hexToRgb(colorScale[0]);
    const [r2, g2, b2] = hexToRgb(colorScale[1]);
    const r = Math.round(r1 + (r2 - r1) * ratio);
    const g = Math.round(g1 + (g2 - g1) * ratio);
    const b = Math.round(b1 + (b2 - b1) * ratio);
    return `rgb(${r}, ${g}, ${b})`;
  };

  return (
    <div className={cn('relative overflow-hidden', className)}>
      <svg
        viewBox="0 0 959 593"
        className="w-full h-full"
        preserveAspectRatio="xMidYMid meet"
        style={{ minHeight: '200px' }}
      >
        {Object.entries(statePaths).map(([state, { d }]) => {
          const stateData = dataMap.get(state);
          const value = stateData?.value || 0;
          const isSelected = state === selectedState;

          return (
            <g key={state}>
              <path
                d={d}
                fill={value > 0 ? getColor(value) : 'currentColor'}
                stroke={isSelected ? '#14B8A6' : '#6B7280'}
                strokeWidth={isSelected ? 2.5 : 0.75}
                className={cn(
                  'transition-all duration-200 text-surface-200 dark:text-surface-700',
                  onStateClick && 'cursor-pointer hover:brightness-110'
                )}
                onClick={() => onStateClick?.(state)}
              />
              {value > 0 && (
                <title>
                  {state}: {stateData?.label || value}
                </title>
              )}
            </g>
          );
        })}
      </svg>

      {/* Legend */}
      <div className="absolute bottom-2 right-2 flex items-center gap-2 text-xs text-surface-500 bg-white/90 dark:bg-surface-800/90 px-2 py-1 rounded shadow-sm">
        <span>Low</span>
        <div
          className="w-20 h-2.5 rounded"
          style={{
            background: `linear-gradient(to right, ${colorScale[0]}, ${colorScale[1]})`,
          }}
        />
        <span>High</span>
      </div>
    </div>
  );
}

function hexToRgb(hex: string): [number, number, number] {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result
    ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)]
    : [0, 0, 0];
}
